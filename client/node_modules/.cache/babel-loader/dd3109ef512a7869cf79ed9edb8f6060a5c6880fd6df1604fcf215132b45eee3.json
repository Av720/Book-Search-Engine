{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\valen\\\\Book-Search-Engine\\\\client\\\\src\\\\components\\\\LoginForm.js\",\n  _s = $RefreshSig$();\n// see SignupForm.js for comments\nimport React, { useState } from 'react';\nimport { Form, Button, Alert } from 'react-bootstrap';\n// import usemutation \nimport { useMutation } from '@apollo/client';\n\n// import { loginUser } from '../utils/API'; import graphql mutation\nimport { LOGIN_USER } from '../utils/mutations';\nimport Auth from '../utils/auth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst LoginForm = () => {\n  _s();\n  const [userFormData, setUserFormData] = useState({\n    email: '',\n    password: ''\n  });\n  const [validated] = useState(false);\n  const [showAlert, setShowAlert] = useState(false);\n\n  // mutation for login of user -  dropped { error } claimed but never read !!\n  const [loginUser] = useMutation(LOGIN_USER);\n  const handleInputChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    setUserFormData({\n      ...userFormData,\n      [name]: value\n    });\n  };\n  const handleFormSubmit = async event => {\n    event.preventDefault();\n    // check if form has everything (as per react-bootstrap docs)\n    const form = event.currentTarget;\n    if (form.checkValidity() === false) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n    ;\n    try {\n      const {\n        data\n      } = await loginUser({\n        variables: {\n          ...userFormData\n        }\n      });\n      Auth.login(data.login.token);\n      console.log('FORM SUBMIT', data);\n    } catch (err) {\n      console.error(err);\n      setShowAlert(true);\n    }\n    ;\n    setUserFormData({\n      username: '',\n      email: '',\n      password: ''\n    });\n  };\n\n  // if signup has a username field then why are we logging the user in with email.  what's the point of username??  there is none at that point.  if it is to just display their name to the user themself, pointless.  help them feel included with personal username login.\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      noValidate: true,\n      validated: validated,\n      onSubmit: handleFormSubmit,\n      children: [/*#__PURE__*/_jsxDEV(Alert, {\n        dismissible: true,\n        onClose: () => setShowAlert(false),\n        show: showAlert,\n        variant: \"danger\",\n        children: \"Something went wrong with your login credentials!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          htmlFor: \"email\",\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"text\",\n          placeholder: \"Your email\",\n          name: \"email\",\n          onChange: handleInputChange,\n          value: userFormData.email,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n          type: \"invalid\",\n          children: \"Email is required!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          htmlFor: \"password\",\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"password\",\n          placeholder: \"Your password\",\n          name: \"password\",\n          onChange: handleInputChange,\n          value: userFormData.password,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n          type: \"invalid\",\n          children: \"Password is required!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        disabled: !(userFormData.email && userFormData.password),\n        type: \"submit\",\n        variant: \"success\",\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s(LoginForm, \"b6OEU6FXJiSbdKNinaGYvls/NDY=\", false, function () {\n  return [useMutation];\n});\n_c = LoginForm;\nexport default LoginForm;\nvar _c;\n$RefreshReg$(_c, \"LoginForm\");","map":{"version":3,"names":["React","useState","Form","Button","Alert","useMutation","LOGIN_USER","Auth","jsxDEV","_jsxDEV","Fragment","_Fragment","LoginForm","_s","userFormData","setUserFormData","email","password","validated","showAlert","setShowAlert","loginUser","handleInputChange","event","name","value","target","handleFormSubmit","preventDefault","form","currentTarget","checkValidity","stopPropagation","data","variables","login","token","console","log","err","error","username","children","noValidate","onSubmit","dismissible","onClose","show","variant","fileName","_jsxFileName","lineNumber","columnNumber","Group","className","Label","htmlFor","Control","type","placeholder","onChange","required","Feedback","disabled","_c","$RefreshReg$"],"sources":["C:/Users/valen/Book-Search-Engine/client/src/components/LoginForm.js"],"sourcesContent":["// see SignupForm.js for comments\nimport React, { useState } from 'react';\n\nimport { Form, Button, Alert } from 'react-bootstrap';\n// import usemutation \nimport { useMutation } from '@apollo/client';\n\n// import { loginUser } from '../utils/API'; import graphql mutation\nimport { LOGIN_USER } from '../utils/mutations';\n\nimport Auth from '../utils/auth';\n\n\nconst LoginForm = () => {\n  const [userFormData, setUserFormData] = useState({ email: '', password: '' });\n  const [validated] = useState(false);\n  const [showAlert, setShowAlert] = useState(false);\n\n  // mutation for login of user -  dropped { error } claimed but never read !!\n  const [loginUser] = useMutation(LOGIN_USER);\n\n  const handleInputChange = (event) => {\n    const { name, value } = event.target;\n    setUserFormData({ ...userFormData, [name]: value });\n  };\n\n  const handleFormSubmit = async (event) => {\n    event.preventDefault();\n    // check if form has everything (as per react-bootstrap docs)\n    const form = event.currentTarget;\n    if (form.checkValidity() === false) {\n      event.preventDefault();\n      event.stopPropagation();\n    };\n\n    try {\n      const { data } = await loginUser({ variables: { ...userFormData } });\n\n      Auth.login(data.login.token);\n      console.log('FORM SUBMIT', data);\n    } catch (err) {\n      console.error(err);\n      setShowAlert(true);\n    };\n\n    setUserFormData({\n      username: '',\n      email: '',\n      password: '',\n    });\n  };\n\n  // if signup has a username field then why are we logging the user in with email.  what's the point of username??  there is none at that point.  if it is to just display their name to the user themself, pointless.  help them feel included with personal username login.\n  return (\n    <>\n      <Form noValidate validated={validated} onSubmit={handleFormSubmit}>\n        <Alert dismissible onClose={() => setShowAlert(false)} show={showAlert} variant='danger'>\n          Something went wrong with your login credentials!\n        </Alert>\n        <Form.Group className='mb-3'>\n          <Form.Label htmlFor='email'>Email</Form.Label>\n          <Form.Control\n            type='text'\n            placeholder='Your email'\n            name='email'\n            onChange={handleInputChange}\n            value={userFormData.email}\n            required\n          />\n          <Form.Control.Feedback type='invalid'>Email is required!</Form.Control.Feedback>\n        </Form.Group>\n\n        <Form.Group className='mb-3'>\n          <Form.Label htmlFor='password'>Password</Form.Label>\n          <Form.Control\n            type='password'\n            placeholder='Your password'\n            name='password'\n            onChange={handleInputChange}\n            value={userFormData.password}\n            required\n          />\n          <Form.Control.Feedback type='invalid'>Password is required!</Form.Control.Feedback>\n        </Form.Group>\n        <Button\n          disabled={!(userFormData.email && userFormData.password)}\n          type='submit'\n          variant='success'>\n          Submit\n        </Button>\n      </Form>\n    </>\n  );\n};\n\nexport default LoginForm;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}